---

- block:

  - name: check efi firmware
    register: s
    stat: path=/sys/firmware/efi

  - name: set firmware interface type
    set_fact:
      firmware: "{{ { false: 'bios', true: 'uefi' }[s.stat.exists] }}"

  when: firmware is not defined or firmware == 'auto'
